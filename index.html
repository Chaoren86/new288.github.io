<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- å¾®ä¿¡å’Œç§»åŠ¨ç«¯ä¼˜åŒ– -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no, email=no, address=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="x5-fullscreen" content="true">
    <meta name="x5-page-mode" content="app">
    <meta name="full-screen" content="yes">
    <meta name="browsermode" content="application">
    <!-- å®‰å“å¾®ä¿¡æµ®çª—æ”¯æŒ -->
    <meta name="applicable-device" content="mobile">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="320">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="theme-color" content="#667eea">
    <!-- é˜²æ­¢å¾®ä¿¡è¯†åˆ«ä¸ºæ–‡ä»¶ä¸‹è½½ - å¤šé‡å£°æ˜ -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Type" content="text/html">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- å¾®ä¿¡ç‰¹å®šä¼˜åŒ–ï¼Œé˜²æ­¢è¢«è¯†åˆ«ä¸ºæ–‡ä»¶ -->
    <meta name="referrer" content="never">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- æ˜ç¡®å‘Šè¯‰å¾®ä¿¡è¿™æ˜¯ç½‘é¡µï¼Œä¸æ˜¯æ–‡ä»¶ - å¤šé‡å£°æ˜ -->
    <meta name="content-type" content="text/html">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <meta name="media-type" content="text/html">
    <meta name="document-type" content="html">
    <meta name="mime-type" content="text/html">
    <meta name="file-type" content="html">
    <!-- å¾®ä¿¡æµè§ˆå™¨ç‰¹å®šæ ‡è¯† -->
    <meta name="x5-cache" content="false">
    <meta name="x5-page-mode" content="app">
    <meta name="x5-orientation" content="portrait">
    <!-- é¢å¤–å£°æ˜ï¼Œç¡®ä¿å¾®ä¿¡è¯†åˆ«ä¸ºç½‘é¡µ -->
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-itunes-app" content="app-id=">
    <meta name="apple-mobile-web-app-title" content="">
    <!-- å¾®ä¿¡åˆ†äº«ä¼˜åŒ– -->
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta property="og:type" content="website">
    <meta property="og:title" content="">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">
    <!-- ç¦æ­¢æ‰€æœ‰æœç´¢å¼•æ“å’Œçˆ¬è™«æŠ“å– -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex, nocache">
    <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="bingbot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="slurp" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="duckduckbot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="baiduspider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="yisouSpider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="Sogou" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="360Spider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="Bytespider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <!-- ç¦æ­¢QQå’Œå¾®ä¿¡çˆ¬è™« -->
    <meta name="QQBot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="TencentTraveler" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="WeChat" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="MicroMessenger" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <!-- ç¦æ­¢å…¶ä»–å¸¸è§çˆ¬è™« -->
    <meta name="spider" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="crawler" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="bot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <title></title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow-x: hidden;
            overflow-y: hidden;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, "Microsoft YaHei", sans-serif;
            background: white;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            width: 100%;
            max-width: 100%;
            background: white;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            flex-direction: column;
            height: 100vh;
            height: 100dvh; /* åŠ¨æ€è§†å£é«˜åº¦ï¼Œè€ƒè™‘ç§»åŠ¨ç«¯æµè§ˆå™¨å·¥å…·æ  */
            max-height: 100vh;
            max-height: 100dvh;
            position: relative;
            overflow: hidden;
        }
        
        .header {
            background: #2c3e50;
            color: white;
            padding: 15px 20px;
            text-align: center;
            flex-shrink: 0;
        }
        
        .header h1 {
            font-size: clamp(18px, 4vw, 24px);
            margin-bottom: 5px;
            word-break: break-word;
        }
        
        .header p {
            font-size: clamp(12px, 2.5vw, 14px);
            opacity: 0.9;
            word-break: break-all;
        }
        
        .notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px 15px;
            margin: 15px;
            text-align: center;
            font-size: clamp(12px, 2.5vw, 14px);
            flex-shrink: 0;
        }
        
        .iframe-wrapper {
            position: relative;
            flex: 1;
            min-height: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
            display: flex;
            flex-direction: column;
        }
        
        .iframe-container {
            position: relative;
            width: 100%;
            height: 100%;
            flex: 1;
            min-height: 0;
            background: #f5f5f5;
            overflow: visible;
        }
        
        iframe {
            width: 100%;
            height: 100%;
            min-height: 100%;
            border: none;
            display: block;
            background: white;
            overflow: visible;
            /* ç¡®ä¿ iframe å†…å®¹å¯ä»¥å®Œæ•´æ˜¾ç¤º */
            -webkit-overflow-scrolling: touch;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .error-message {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .error-link {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .error-link:hover {
            background: #5568d3;
        }
        
        .mixed-content-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 20px;
            text-align: center;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .mixed-content-warning h3 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .mixed-content-warning p {
            color: #856404;
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 14px;
        }
        
        .mixed-content-warning .solution {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            text-align: left;
        }
        
        .mixed-content-warning .solution strong {
            display: block;
            margin-bottom: 10px;
            color: #333;
        }
        
        .mixed-content-warning .solution ul {
            margin: 10px 0;
            padding-left: 20px;
            color: #666;
        }
        
        .mixed-content-warning .solution li {
            margin: 5px 0;
        }
        
        .footer {
            text-align: center;
            padding: 12px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
            color: #666;
            font-size: clamp(11px, 2vw, 13px);
            flex-shrink: 0;
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            html, body {
                height: 100vh;
                height: 100dvh;
            }
            
            body {
                padding: 0;
            }
            
            .container {
                border-radius: 0;
                height: 100vh;
                height: 100dvh;
                max-height: 100vh;
                max-height: 100dvh;
            }
            
            .iframe-wrapper {
                height: 100%;
            }
            
            .iframe-container {
                height: 100%;
            }
            
            iframe {
                height: 100%;
                min-height: 100%;
            }
            
            .loading {
                padding: 15px 20px;
                width: 90%;
                max-width: 300px;
            }
            
            .mixed-content-warning {
                margin: 15px;
                padding: 15px;
            }
            
            .mixed-content-warning h3 {
                font-size: 16px;
            }
            
            .mixed-content-warning p {
                font-size: 13px;
            }
            
            .mixed-content-warning .solution {
                padding: 12px;
                font-size: 12px;
            }
        }
        
        /* Safari ç‰¹å®šä¼˜åŒ– */
        @supports (-webkit-touch-callout: none) {
            html, body {
                height: -webkit-fill-available;
            }
            
            .container {
                min-height: -webkit-fill-available;
            }
            
            .iframe-wrapper {
                min-height: -webkit-fill-available;
            }
        }
        
        /* Chrome ç‰¹å®šä¼˜åŒ– */
        @media screen and (min-width: 769px) {
            .container {
                height: 100vh;
            }
        }
        
        /* è¶…å°å±å¹•ä¼˜åŒ– */
        @media (max-width: 480px) {
            .loading-text {
                font-size: 14px;
            }
        }
        
        /* æ¨ªå±æ¨¡å¼ä¼˜åŒ– */
        @media (orientation: landscape) and (max-height: 500px) {
            /* æ¨ªå±æ¨¡å¼ç‰¹å®šæ ·å¼ */
        }
        
        /* éšè—åŠ è½½åŠ¨ç”» */
        .loading.hidden {
            display: none;
        }
        
        /* å®‰å…¨æ£€æµ‹é¡µé¢ */
        .security-check {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        
        .security-check.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            display: none !important;
        }
        
        .security-check-content {
            background: white;
            border-radius: 20px;
            padding: 40px 50px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 90%;
            animation: fadeInUp 0.6s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .security-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
            }
        }
        
        .security-check-content h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
            transition: all 0.5s ease-out;
        }
        
        .security-check-content .subtitle {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .security-check-content p {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .security-check-content .hint {
            font-size: 14px;
            color: #999;
            margin-top: 20px;
            font-style: italic;
        }
        
        /* æ£€æµ‹æ­¥éª¤ */
        .check-steps {
            margin: 30px 0;
            text-align: left;
        }
        
        .check-step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.5s ease-out;
        }
        
        .check-step.active {
            opacity: 1;
            transform: translateX(0);
        }
        
        .check-step.completed {
            opacity: 0.6;
        }
        
        .step-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            flex-shrink: 0;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .check-step.active .step-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            animation: stepPulse 1s infinite;
        }
        
        .check-step.completed .step-icon {
            background: #4caf50;
            color: white;
        }
        
        .check-step.completed .step-icon::before {
            content: 'âœ“';
        }
        
        @keyframes stepPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }
        
        .step-text {
            font-size: 15px;
            color: #666;
            flex: 1;
        }
        
        .check-step.active .step-text {
            color: #333;
            font-weight: 500;
        }
        
        .check-step.completed .step-text {
            color: #999;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s ease-out;
            border-radius: 2px;
        }
        
        /* æ£€æµ‹å®ŒæˆçŠ¶æ€ */
        .security-check-content.check-complete .check-steps {
            max-height: 0;
            opacity: 0;
            margin: 0;
            overflow: hidden;
            transition: all 0.5s ease-out;
        }
        
        .security-check-content.check-complete .progress-bar {
            opacity: 0;
            height: 0;
            margin: 0;
            transition: all 0.5s ease-out;
        }
        
        .security-check-content.check-complete .security-icon {
            background: #4caf50;
            animation: successPulse 0.6s ease-out;
            width: 100px;
            height: 100px;
            font-size: 50px;
        }
        
        @keyframes successPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.15);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .security-check-content.check-complete h2 {
            font-size: 28px;
            margin-bottom: 15px;
            color: #4caf50;
        }
        
        .security-check-content.check-complete .subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
        }
        
        .security-check-btn {
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            transition: all 0.5s ease-out;
            pointer-events: none;
        }
        
        .security-check-content.check-complete .security-check-btn {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
            padding: 20px 60px;
            font-size: 20px;
        }
        
        .check-complete-message {
            font-size: 15px;
            color: #4caf50;
            margin-bottom: 25px;
            font-weight: 500;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.5s ease-out 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .check-complete-message::before {
            content: 'âœ“';
            display: inline-block;
            width: 24px;
            height: 24px;
            background: #4caf50;
            color: white;
            border-radius: 50%;
            line-height: 24px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .security-check-content.check-complete .check-complete-message {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ç®€åŒ–åçš„å¸ƒå±€ */
        .security-check-content.check-complete {
            padding: 50px 40px;
        }
        
        .security-check-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            font-weight: 600;
            position: relative;
            overflow: hidden;
            animation: buttonPulse 2s infinite;
        }
        
        .security-check-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .security-check-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .security-check-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }
        
        .security-check-btn:active {
            transform: translateY(-1px) scale(1.02);
        }
        
        @keyframes buttonPulse {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            }
            50% {
                box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6);
            }
        }
        
        .security-check-btn span {
            position: relative;
            z-index: 1;
        }
        
        .security-check-content .arrow-hint {
            display: inline-block;
            margin-left: 8px;
            animation: arrowBounce 1.5s infinite;
        }
        
        @keyframes arrowBounce {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(5px);
            }
        }
        
        @media (max-width: 768px) {
            .security-check-content {
                padding: 30px 25px;
            }
            
            .security-check-content.check-complete {
                padding: 40px 25px;
            }
            
            .security-icon {
                width: 60px;
                height: 60px;
                font-size: 30px;
                margin-bottom: 15px;
            }
            
            .security-check-content.check-complete .security-icon {
                width: 80px;
                height: 80px;
                font-size: 40px;
            }
            
            .security-check-content h2 {
                font-size: 20px;
                margin-bottom: 12px;
            }
            
            .security-check-content.check-complete h2 {
                font-size: 22px;
                margin-bottom: 15px;
            }
            
            .security-check-content p {
                font-size: 14px;
                margin-bottom: 25px;
            }
            
            .security-check-content.check-complete .subtitle {
                font-size: 15px;
                margin-bottom: 35px;
            }
            
            .security-check-btn {
                padding: 12px 30px;
                font-size: 16px;
            }
            
            .security-check-content.check-complete .security-check-btn {
                padding: 16px 40px;
                font-size: 18px;
            }
            
            .check-complete-message {
                font-size: 14px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ç«‹å³è¾“å‡ºå¯è§å†…å®¹ï¼Œç¡®ä¿å¾®ä¿¡è¯†åˆ«ä¸ºHTMLé¡µé¢è€Œä¸æ˜¯æ–‡ä»¶ -->
    <!-- å¾®ä¿¡éœ€è¦ç«‹å³çœ‹åˆ°HTMLå†…å®¹æ‰èƒ½æ­£ç¡®è¯†åˆ« -->
    <div style="display:none;" id="wechat-html-marker">HTML</div>
    <!-- JavaScriptæ£€æµ‹æç¤ºï¼ˆé€šè¿‡JavaScriptæ§åˆ¶æ˜¾ç¤ºï¼‰ -->
    <div id="jsWarning" style="position:fixed;top:0;left:0;width:100%;height:100%;background:#f5f5f5;display:none;align-items:center;justify-content:center;z-index:99999;">
        <div style="text-align:center;padding:40px;background:white;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color:#d32f2f;margin-bottom:20px;">éœ€è¦å¯ç”¨JavaScript</h2>
            <p style="color:#666;line-height:1.6;">æœ¬é¡µé¢éœ€è¦JavaScriptæ”¯æŒæ‰èƒ½æ­£å¸¸è®¿é—®ã€‚</p>
            <p style="color:#999;font-size:14px;margin-top:20px;">è¯·å¯ç”¨æµè§ˆå™¨çš„JavaScriptåŠŸèƒ½ååˆ·æ–°é¡µé¢ã€‚</p>
        </div>
    </div>
    <!-- å®‰å…¨æ£€æµ‹é¡µé¢ -->
    <div id="securityCheck" class="security-check">
        <div class="security-check-content" id="securityCheckContent">
            <div class="security-icon">ğŸ”’</div>
            <h2>å®‰å…¨æ£€æµ‹ä¸­</h2>
            <div class="subtitle" id="checkSubtitle">æ­£åœ¨éªŒè¯è®¿é—®ç¯å¢ƒ...</div>
            
            <div class="check-steps">
                <div class="check-step" id="step1">
                    <div class="step-icon">1</div>
                    <div class="step-text">æ£€æµ‹æµè§ˆå™¨ç¯å¢ƒ</div>
                </div>
                <div class="check-step" id="step2">
                    <div class="step-icon">2</div>
                    <div class="step-text">éªŒè¯å®‰å…¨è¿æ¥</div>
                </div>
                <div class="check-step" id="step3">
                    <div class="step-icon">3</div>
                    <div class="step-text">æ£€æŸ¥è®¿é—®æƒé™</div>
                </div>
                <div class="check-step" id="step4">
                    <div class="step-icon">4</div>
                    <div class="step-text">å®Œæˆå®‰å…¨éªŒè¯</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <button class="security-check-btn" id="securityCheckBtn">
                <span>ç‚¹å‡»è¿›å…¥ <span class="arrow-hint">â†’</span></span>
            </button>
        </div>
    </div>
    
    <div class="container">
        <div id="mixedContentWarning" class="mixed-content-warning" style="display: none;">
            <h3>âš ï¸ æ··åˆå†…å®¹å®‰å…¨é™åˆ¶</h3>
            <p>ç”±äºæµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼ŒHTTPS é¡µé¢æ— æ³•åµŒå…¥ HTTP å†…å®¹ã€‚</p>
            <div class="solution">
                <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                <ul>
                    <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®åœ¨æ–°çª—å£ä¸­æ‰“å¼€ç½‘ç«™ï¼ˆæ¨èï¼‰</li>
                    <li>æˆ–è€…å°†é¡µé¢éƒ¨ç½²åˆ° HTTP ç¯å¢ƒï¼ˆé GitHub Pagesï¼‰</li>
                    <li>æˆ–è€…ä¸ºç›®æ ‡æœåŠ¡å™¨é…ç½® HTTPS è¯ä¹¦</li>
                </ul>
            </div>
            <a href="https://47.86.49.52:1188" target="_blank" rel="noopener noreferrer" class="error-link" id="mixedContentLink" style="margin-top: 15px;">åœ¨æ–°çª—å£ä¸­æ‰“å¼€ç½‘ç«™</a>
        </div>
        <div class="iframe-wrapper" id="iframeWrapper">
            <div class="iframe-container">
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">æ­£åœ¨åŠ è½½ç½‘ç«™...</div>
                </div>
                <iframe 
                    id="mainFrame"
                    title="ç¬¬ä¸‰æ–¹ç½‘ç«™å†…å®¹"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen"
                    allowfullscreen
                    sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation allow-modals"
                    referrerpolicy="no-referrer-when-downgrade"
                    loading="eager"
                    scrolling="yes"
                    style="overflow: auto; -webkit-overflow-scrolling: touch;">
                    <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒiframeã€‚è¯·<a href="https://47.86.49.52:1188" target="_blank" rel="noopener noreferrer" id="fallbackLink">ç‚¹å‡»è¿™é‡Œ</a>åœ¨æ–°çª—å£ä¸­æ‰“å¼€ã€‚</p>
                </iframe>
            </div>
        </div>
    </div>

    <script>
        (function() {
            'use strict';
            
            // æ£€æµ‹å¾®ä¿¡ç¯å¢ƒ
            const isWeChat = /micromessenger/i.test(navigator.userAgent);
            const isQQ = /mqqbrowser|qzone|qqbrowser/i.test(navigator.userAgent);
            
            // å¾®ä¿¡/QQç¯å¢ƒç‰¹æ®Šå¤„ç†ï¼šç«‹å³æ¸²æŸ“é¡µé¢å†…å®¹ï¼Œé˜²æ­¢è¢«è¯†åˆ«ä¸ºæ–‡ä»¶
            if (isWeChat || isQQ) {
                // å¼ºåˆ¶ç«‹å³æ˜¾ç¤ºbodyå†…å®¹
                if (document.body) {
                    document.body.style.visibility = 'visible';
                    document.body.style.display = 'block';
                    document.body.style.opacity = '1';
                }
                // ç¡®ä¿HTMLå…ƒç´ å¯è§
                if (document.documentElement) {
                    document.documentElement.style.visibility = 'visible';
                    document.documentElement.style.display = 'block';
                }
                // ç«‹å³è§¦å‘é‡ç»˜å’Œå›æµï¼Œç¡®ä¿å¾®ä¿¡è¯†åˆ«ä¸ºHTML
                if (document.body) {
                    // å¼ºåˆ¶è§¦å‘é‡ç»˜
                    const forceRepaint = document.body.offsetHeight;
                    // ç¡®ä¿æœ‰å†…å®¹é«˜åº¦
                    if (document.body.offsetHeight === 0) {
                        document.body.style.minHeight = '1px';
                        setTimeout(function() {
                            if (document.body) {
                                document.body.style.minHeight = '';
                            }
                        }, 0);
                    }
                }
                // ç¡®ä¿å®‰å…¨æ£€æµ‹é¡µé¢ç«‹å³å¯è§
                const securityCheck = document.getElementById('securityCheck');
                if (securityCheck) {
                    securityCheck.style.display = 'flex';
                    securityCheck.style.visibility = 'visible';
                    securityCheck.style.opacity = '1';
                }
                // å¼ºåˆ¶è§¦å‘ä¸€æ¬¡é‡ç»˜
                if (window.requestAnimationFrame) {
                    requestAnimationFrame(function() {
                        if (document.body) {
                            document.body.style.display = document.body.style.display || 'block';
                        }
                    });
                }
            }
            
            // ç«‹å³éšè—JavaScriptè­¦å‘Šï¼ˆå¦‚æœJavaScriptèƒ½è¿è¡Œï¼Œè¯´æ˜å·²å¯ç”¨ï¼‰
            (function() {
                const jsWarning = document.getElementById('jsWarning');
                if (jsWarning) {
                    jsWarning.style.display = 'none';
                }
            })();
            
            // åçˆ¬è™«æ£€æµ‹ - æ£€æµ‹User-Agent
            function detectCrawler() {
                const userAgent = navigator.userAgent || '';
                const ua = userAgent.toLowerCase();
                
                // å…è®¸çš„æ­£å¸¸æµè§ˆå™¨User-Agentå…³é”®è¯ï¼ˆè¿™äº›ä¸åº”è¯¥è¢«é˜»æ­¢ï¼‰
                const allowedBrowsers = [
                    'micromessenger',  // å¾®ä¿¡å†…ç½®æµè§ˆå™¨
                    'wechat',          // å¾®ä¿¡æµè§ˆå™¨
                    'qqbrowser',       // QQæµè§ˆå™¨
                    'mqqbrowser',      // ç§»åŠ¨QQæµè§ˆå™¨
                    'tencenttraveler'  // è…¾è®¯æµè§ˆå™¨
                ];
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯æ­£å¸¸çš„æµè§ˆå™¨ï¼ˆåŒ…å«å…è®¸çš„å…³é”®è¯ï¼‰
                let isAllowedBrowser = false;
                for (let i = 0; i < allowedBrowsers.length; i++) {
                    if (ua.indexOf(allowedBrowsers[i]) !== -1) {
                        isAllowedBrowser = true;
                        break;
                    }
                }
                
                // å¦‚æœæ˜¯æ­£å¸¸æµè§ˆå™¨ï¼Œç›´æ¥å…è®¸è®¿é—®
                if (isAllowedBrowser) {
                    return false;
                }
                
                // æ˜ç¡®çš„çˆ¬è™«å…³é”®è¯åˆ—è¡¨ï¼ˆåªæ£€æµ‹çœŸæ­£çš„çˆ¬è™«ï¼‰
                const crawlerKeywords = [
                    // æœç´¢å¼•æ“çˆ¬è™«ï¼ˆæ˜ç¡®çš„botæ ‡è¯†ï¼‰
                    'googlebot',
                    'bingbot',
                    'slurp',
                    'duckduckbot',
                    'baiduspider',
                    'yisouspider',
                    'sogou web spider',
                    'sogou inst spider',
                    '360spider',
                    'bytespider',
                    'yandexbot',
                    'facebookexternalhit',
                    'facebookbot',
                    'twitterbot',
                    'linkedinbot',
                    'telegrambot',
                    // æ˜ç¡®çš„çˆ¬è™«æ ‡è¯†ï¼ˆå¿…é¡»åŒ…å«bot/spider/crawlerç­‰ï¼‰
                    'spider',
                    'crawler',
                    'bot',
                    'scraper',
                    'spiderbot',
                    'crawlbot',
                    // è‡ªåŠ¨åŒ–å·¥å…·å’Œçˆ¬è™«æ¡†æ¶
                    'python-requests',
                    'scrapy',
                    'headless',
                    'phantom',
                    'selenium',
                    'puppeteer',
                    'playwright',
                    'cheerio',
                    // HTTPå®¢æˆ·ç«¯ï¼ˆå¯èƒ½æ˜¯çˆ¬è™«ï¼‰
                    'wget',
                    'curl',
                    'java/',
                    'go-http-client',
                    'httpclient',
                    'apache-httpclient',
                    'okhttp',
                    'node-fetch',
                    'axios'
                ];
                
                // æ£€æµ‹æ˜¯å¦ä¸ºæ˜ç¡®çš„çˆ¬è™«ï¼ˆå¿…é¡»åŒ…å«æ˜ç¡®çš„çˆ¬è™«å…³é”®è¯ï¼‰
                for (let i = 0; i < crawlerKeywords.length; i++) {
                    if (ua.indexOf(crawlerKeywords[i]) !== -1) {
                        // å¯¹äºbot/spider/crawlerè¿™äº›é€šç”¨è¯ï¼Œéœ€è¦æ›´ä¸¥æ ¼çš„åˆ¤æ–­
                        if (crawlerKeywords[i] === 'bot' || crawlerKeywords[i] === 'spider' || crawlerKeywords[i] === 'crawler') {
                            // æ£€æŸ¥æ˜¯å¦çœŸçš„æ˜¯çˆ¬è™«ï¼ˆUser-Agentä¸­æ˜ç¡®åŒ…å«bot/spider/crawlerï¼Œä¸”ä¸æ˜¯æ­£å¸¸æµè§ˆå™¨ï¼‰
                            // æ­£å¸¸æµè§ˆå™¨çš„User-Agenté€šå¸¸åŒ…å«chrome/safari/firefoxç­‰
                            const hasBrowserMarker = ua.indexOf('chrome') !== -1 || 
                                                    ua.indexOf('safari') !== -1 || 
                                                    ua.indexOf('firefox') !== -1 ||
                                                    ua.indexOf('edge') !== -1 ||
                                                    ua.indexOf('opera') !== -1;
                            // å¦‚æœåŒ…å«bot/spider/crawlerä½†æ²¡æœ‰æ­£å¸¸æµè§ˆå™¨æ ‡è¯†ï¼Œåˆ¤å®šä¸ºçˆ¬è™«
                            if (!hasBrowserMarker) {
                                return true;
                            }
                        } else {
                            // å…¶ä»–æ˜ç¡®çš„çˆ¬è™«å…³é”®è¯ï¼ˆå¦‚googlebotã€seleniumç­‰ï¼‰ï¼Œç›´æ¥åˆ¤å®šä¸ºçˆ¬è™«
                            return true;
                        }
                    }
                }
                
                // æ£€æµ‹è‡ªåŠ¨åŒ–å·¥å…·ç‰¹å¾ï¼ˆwebdriveræ˜¯seleniumç­‰è‡ªåŠ¨åŒ–å·¥å…·çš„æ ‡å¿—ï¼‰
                // ä½†å…è®¸æ­£å¸¸çš„Chromeæµè§ˆå™¨ï¼ˆå³ä½¿æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼‰
                if (navigator.webdriver) {
                    // å¦‚æœåŒæ—¶æ»¡è¶³å¤šä¸ªå¯ç–‘æ¡ä»¶ï¼Œæ‰åˆ¤å®šä¸ºçˆ¬è™«
                    // å•ç‹¬webdriverå±æ€§å¯èƒ½æ˜¯å¼€å‘è€…å·¥å…·ï¼Œä¸ç›´æ¥é˜»æ­¢
                    const suspiciousCount = 0;
                    // æ£€æŸ¥æ˜¯å¦çœŸçš„æ˜¯è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆç»“åˆå…¶ä»–ç‰¹å¾ï¼‰
                    if (!window.chrome || !navigator.plugins || navigator.plugins.length === 0) {
                        return true;
                    }
                }
                
                // æ£€æµ‹å±å¹•å°ºå¯¸å¼‚å¸¸ï¼ˆæ— å¤´æµè§ˆå™¨é€šå¸¸æœ‰å›ºå®šå°ºå¯¸ï¼‰
                // ä½†å…è®¸æ­£å¸¸çš„æµè§ˆå™¨ï¼ˆå³ä½¿çª—å£å¾ˆå°ï¼‰
                if (window.screen && window.screen.width > 0 && window.screen.height > 0) {
                    // å±å¹•å°ºå¯¸æ­£å¸¸ï¼Œç»§ç»­æ£€æµ‹
                } else if (window.screen && (window.screen.width === 0 || window.screen.height === 0)) {
                    // å±å¹•å°ºå¯¸ä¸º0ï¼Œç»“åˆå…¶ä»–ç‰¹å¾åˆ¤æ–­
                    if (navigator.webdriver || ua.indexOf('headless') !== -1) {
                        return true;
                    }
                }
                
                // æ£€æµ‹è¯­è¨€è®¾ç½®å¼‚å¸¸ï¼ˆçœŸæ­£çš„æµè§ˆå™¨åº”è¯¥æœ‰è¯­è¨€è®¾ç½®ï¼‰
                if (!navigator.language && !navigator.languages) {
                    // ç»“åˆå…¶ä»–ç‰¹å¾åˆ¤æ–­
                    if (navigator.webdriver || ua.indexOf('headless') !== -1) {
                        return true;
                    }
                }
                
                // æ£€æµ‹æ—¶åŒºå¼‚å¸¸ï¼ˆçœŸæ­£çš„æµè§ˆå™¨åº”è¯¥æœ‰æ—¶åŒºï¼‰
                try {
                    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                    if (!timezone) {
                        // ç»“åˆå…¶ä»–ç‰¹å¾åˆ¤æ–­
                        if (navigator.webdriver || ua.indexOf('headless') !== -1) {
                            return true;
                        }
                    }
                } catch (e) {
                    // æ—¶åŒºæ£€æµ‹å¤±è´¥ï¼Œä¸ç›´æ¥åˆ¤å®šä¸ºçˆ¬è™«
                }
                
                return false;
            }
            
            // å¦‚æœæ£€æµ‹åˆ°çˆ¬è™«ï¼Œé˜»æ­¢è®¿é—®
            if (detectCrawler()) {
                // æ¸…ç©ºé¡µé¢å†…å®¹
                document.body.innerHTML = '';
                document.body.style.cssText = 'margin:0;padding:0;background:#f5f5f5;display:flex;align-items:center;justify-content:center;height:100vh;font-family:Arial,sans-serif;';
                document.body.innerHTML = '<div style="text-align:center;padding:40px;background:white;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);"><h2 style="color:#d32f2f;margin-bottom:20px;">è®¿é—®è¢«æ‹’ç»</h2><p style="color:#666;line-height:1.6;">æŠ±æ­‰ï¼Œæœ¬é¡µé¢ä¸å…è®¸è‡ªåŠ¨åŒ–å·¥å…·è®¿é—®ã€‚</p><p style="color:#999;font-size:14px;margin-top:20px;">è¯·ä½¿ç”¨æ­£å¸¸çš„æµè§ˆå™¨è®¿é—®ã€‚</p></div>';
                // é˜»æ­¢åç»­è„šæœ¬æ‰§è¡Œ
                throw new Error('Crawler detected');
            }
            
            // è·å–DOMå…ƒç´ 
            const iframe = document.getElementById('mainFrame');
            const loading = document.getElementById('loading');
            const iframeWrapper = document.getElementById('iframeWrapper');
            const mixedContentWarning = document.getElementById('mixedContentWarning');
            const securityCheck = document.getElementById('securityCheck');
            const securityCheckBtn = document.getElementById('securityCheckBtn');
            
            // å˜é‡åˆå§‹åŒ–
            let loadTimeout;
            let hasLoaded = false;
            let errorDetected = false;
            let checkCount = 0;
            const maxChecks = 20; // æœ€å¤šæ£€æŸ¥20æ¬¡ï¼ˆ10ç§’ï¼‰
            
            // iframeåŸºç¡€URL
            const iframeBaseUrl = 'https://47.86.49.52:1188';
            
            // è·å–å½“å‰é¡µé¢çš„hashå‚æ•°
            function getCurrentHash() {
                const hash = window.location.hash;
                return hash && hash.length > 1 ? hash : '';
            }
            
            // è·å–å½“å‰é¡µé¢çš„æŸ¥è¯¢å‚æ•°ï¼ˆè½¬æ¢ä¸ºhashæ ¼å¼ï¼‰
            function getQueryParam() {
                const search = window.location.search;
                if (search) {
                    const params = new URLSearchParams(search);
                    const agentCode = params.get('agent_code');
                    if (agentCode) {
                        // è½¬æ¢ä¸ºhashæ ¼å¼
                        return '#/?agent_code=' + agentCode;
                    }
                }
                return '';
            }
            
            // æ„å»ºå®Œæ•´çš„iframe URL
            function buildIframeUrl() {
                // ä¼˜å…ˆä½¿ç”¨æŸ¥è¯¢å‚æ•°ï¼ˆå·²è½¬æ¢ä¸ºhashæ ¼å¼ï¼‰
                const queryParam = getQueryParam();
                if (queryParam) {
                    return iframeBaseUrl + '/' + queryParam;
                }
                
                // å¦‚æœæ²¡æœ‰æŸ¥è¯¢å‚æ•°ï¼Œä½¿ç”¨hashå‚æ•°
                const hash = getCurrentHash();
                if (hash) {
                    return iframeBaseUrl + '/' + hash;
                }
                
                return iframeBaseUrl;
            }
            
            // æ›´æ–°iframeçš„srcå’Œæ‰€æœ‰ç›¸å…³é“¾æ¥
            function updateIframeUrl() {
                const newUrl = buildIframeUrl();
                if (iframe) {
                    if (iframe.src !== newUrl) {
                        iframe.src = newUrl;
                        hasLoaded = false; // é‡ç½®åŠ è½½çŠ¶æ€
                        if (loading) {
                            loading.classList.remove('hidden');
                        }
                    } else {
                        // å³ä½¿URLç›¸åŒï¼Œä¹Ÿç¡®ä¿å‚æ•°å­˜åœ¨
                        const param = getQueryParam() || getCurrentHash();
                        if (param && !iframe.src.includes(param)) {
                            iframe.src = newUrl;
                        }
                    }
                }
                
                // æ›´æ–°æ‰€æœ‰é”™è¯¯é“¾æ¥ä¸­çš„URL
                const errorLinks = document.querySelectorAll('.error-link, iframe a');
                errorLinks.forEach(function(link) {
                    if (link.href && link.href.includes(iframeBaseUrl)) {
                        const param = getQueryParam() || getCurrentHash();
                        link.href = iframeBaseUrl + param;
                    }
                });
            }
            
            // æ£€æµ‹æ··åˆå†…å®¹é—®é¢˜
            function checkMixedContent() {
                return window.location.protocol === 'https:' && iframe && iframe.src.startsWith('http:');
            }
            
            // æ˜¾ç¤ºæ··åˆå†…å®¹è­¦å‘Š
            function showMixedContentWarning() {
                if (mixedContentWarning) {
                    mixedContentWarning.style.display = 'block';
                    // æ›´æ–°è­¦å‘Šä¸­çš„é“¾æ¥URL
                    const mixedContentLink = document.getElementById('mixedContentLink');
                    if (mixedContentLink) {
                        const param = getQueryParam() || getCurrentHash();
                        mixedContentLink.href = iframeBaseUrl + param;
                    }
                }
                if (iframeWrapper) {
                    iframeWrapper.style.display = 'none';
                }
                if (loading) {
                    loading.classList.add('hidden');
                }
                errorDetected = true;
            }
            
            // æ£€æµ‹iframeæ˜¯å¦æˆåŠŸåŠ è½½
            function checkIframeLoad() {
                checkCount++;
                try {
                    // å°è¯•è®¿é—®iframeå†…å®¹ï¼ˆå¯èƒ½å› è·¨åŸŸå¤±è´¥ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼‰
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    if (iframeDoc && iframeDoc.readyState === 'complete') {
                        hideLoading();
                        hasLoaded = true;
                        return true;
                    }
                } catch (e) {
                    // è·¨åŸŸè®¿é—®è¢«é˜»æ­¢æ˜¯æ­£å¸¸çš„ï¼Œä¸ä»£è¡¨åŠ è½½å¤±è´¥
                    // å¦‚æœiframeå·²ç»åŠ è½½äº†ä¸€æ®µæ—¶é—´ï¼Œè®¤ä¸ºåŠ è½½æˆåŠŸ
                    if (!errorDetected && checkCount > 3) {
                        // å»¶è¿Ÿéšè—åŠ è½½æç¤ºï¼Œç»™iframeæ›´å¤šæ—¶é—´
                        setTimeout(hideLoading, 1000);
                        return true;
                    }
                }
                return false;
            }
            
            // éšè—åŠ è½½æç¤º
            function hideLoading() {
                if (loading && !hasLoaded) {
                    loading.classList.add('hidden');
                    hasLoaded = true;
                    if (loadTimeout) {
                        clearTimeout(loadTimeout);
                    }
                }
            }
            
            // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            function showError(message, details) {
                errorDetected = true;
                if (loading) {
                    let errorHTML = '<div class="error-message">' + message + '</div>';
                    if (details) {
                        errorHTML += '<div style="font-size: 12px; color: #999; margin-top: 10px;">' + details + '</div>';
                    }
                    const param = getQueryParam() || getCurrentHash();
                    const errorUrl = iframeBaseUrl + param;
                    errorHTML += '<a href="' + errorUrl + '" target="_blank" rel="noopener noreferrer" class="error-link">ç‚¹å‡»è¿™é‡Œåœ¨æ–°çª—å£ä¸­æ‰“å¼€</a>';
                    loading.innerHTML = errorHTML;
                    loading.classList.remove('hidden');
                }
            }
            
            // æµ‹è¯•URLæ˜¯å¦å¯è®¿é—®
            function testUrlAccessibility() {
                return new Promise(function(resolve) {
                    const testImg = new Image();
                    testImg.onload = function() {
                        resolve(true);
                    };
                    testImg.onerror = function() {
                        resolve(false);
                    };
                    // å°è¯•åŠ è½½ç›®æ ‡URLçš„faviconæˆ–æ ¹è·¯å¾„
                    testImg.src = 'https://47.86.49.52:1188/favicon.ico?' + Date.now();
                    setTimeout(function() {
                        resolve(null); // è¶…æ—¶è¿”å›null
                    }, 3000);
                });
            }
            
            // iframeåŠ è½½äº‹ä»¶å¤„ç†
            if (iframe) {
                // ç«‹å³è®¾ç½®iframeçš„srcï¼ˆåœ¨é¡µé¢åŠ è½½çš„æœ€æ—©æ—¶æœºï¼‰
                updateIframeUrl();
                
                // å¦‚æœDOMè¿˜åœ¨åŠ è½½ï¼Œä¹Ÿç›‘å¬DOMContentLoadedç¡®ä¿æ›´æ–°
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', function() {
                        updateIframeUrl();
                    });
                }
                
                // ç›‘å¬hashå˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°iframe URL
                window.addEventListener('hashchange', function() {
                    updateIframeUrl();
                });
                
                // é¡µé¢å®Œå…¨åŠ è½½åå†æ¬¡æ£€æŸ¥ï¼ˆç¡®ä¿å‚æ•°è¢«åº”ç”¨ï¼‰
                window.addEventListener('load', function() {
                    const param = getQueryParam() || getCurrentHash();
                    if (param && iframe && !iframe.src.includes(param)) {
                        updateIframeUrl();
                    }
                });
                
                // ç«‹å³æ£€æŸ¥æ··åˆå†…å®¹é—®é¢˜
                const hasMixedContent = checkMixedContent();
                if (hasMixedContent) {
                    console.warn('æ£€æµ‹åˆ°æ··åˆå†…å®¹é—®é¢˜ï¼šHTTPSé¡µé¢æ— æ³•åµŒå…¥HTTPå†…å®¹');
                    // ç«‹å³æ˜¾ç¤ºè­¦å‘Šï¼Œä¸ç­‰å¾…iframeåŠ è½½
                    showMixedContentWarning();
                    return; // æå‰è¿”å›ï¼Œä¸ç»§ç»­æ‰§è¡Œåç»­ä»£ç 
                }
                
                // ç›‘å¬iframeåŠ è½½å®Œæˆ
                iframe.addEventListener('load', function() {
                    console.log('iframe load äº‹ä»¶è§¦å‘');
                    // æ›´æ–°é«˜åº¦ï¼Œç¡®ä¿å†…å®¹å®Œæ•´æ˜¾ç¤º
                    updateIframeHeight();
                    // å»¶è¿Ÿä¸€ç‚¹å†éšè—ï¼Œç¡®ä¿å†…å®¹æ¸²æŸ“å®Œæˆ
                    setTimeout(function() {
                        if (!errorDetected) {
                            hideLoading();
                            // å†æ¬¡æ›´æ–°é«˜åº¦ï¼Œç¡®ä¿åº•éƒ¨å¯¼èˆªæ å¯è§
                            updateIframeHeight();
                        }
                    }, 800);
                    // å»¶è¿Ÿæ›´æ–°é«˜åº¦ï¼Œç­‰å¾…å†…å®¹å®Œå…¨æ¸²æŸ“
                    setTimeout(updateIframeHeight, 1500);
                    setTimeout(updateIframeHeight, 3000);
                });
                
                // ç›‘å¬iframeåŠ è½½é”™è¯¯
                iframe.addEventListener('error', function(e) {
                    console.error('iframe error äº‹ä»¶è§¦å‘', e);
                    // å†æ¬¡æ£€æŸ¥æ˜¯å¦æ˜¯æ··åˆå†…å®¹é—®é¢˜
                    if (checkMixedContent()) {
                        showMixedContentWarning();
                        return;
                    }
                    
                    let errorMsg = 'åŠ è½½å¤±è´¥ï¼Œå¯èƒ½çš„åŸå› ï¼š';
                    let details = '';
                    errorMsg += '<br>â€¢ ç›®æ ‡ç½‘ç«™ä¸å…è®¸åµŒå…¥ï¼ˆX-Frame-Optionsé™åˆ¶ï¼‰';
                    errorMsg += '<br>â€¢ ç½‘ç»œè¿æ¥é—®é¢˜';
                    errorMsg += '<br>â€¢ æœåŠ¡å™¨æœªå“åº”';
                    details += 'æç¤ºï¼šè¯·æ£€æŸ¥ç›®æ ‡URLæ˜¯å¦å¯è®¿é—®ï¼Œæˆ–å°è¯•åœ¨æ–°çª—å£ä¸­æ‰“å¼€ã€‚';
                    
                    showError(errorMsg, details);
                });
                
                // ä½¿ç”¨å¤šç§æ–¹å¼æ£€æµ‹åŠ è½½çŠ¶æ€
                let loadCheckInterval = setInterval(function() {
                    // å¦‚æœæ£€æµ‹åˆ°æ··åˆå†…å®¹ï¼Œåœæ­¢æ£€æŸ¥
                    if (checkMixedContent() && !errorDetected) {
                        clearInterval(loadCheckInterval);
                        showMixedContentWarning();
                        return;
                    }
                    
                    if (hasLoaded) {
                        clearInterval(loadCheckInterval);
                        return;
                    }
                    
                    if (checkIframeLoad()) {
                        clearInterval(loadCheckInterval);
                    } else if (checkCount >= maxChecks) {
                        clearInterval(loadCheckInterval);
                        // å¦‚æœæ£€æŸ¥äº†è¶³å¤Ÿå¤šæ¬¡è¿˜æ²¡æˆåŠŸï¼Œå†æ¬¡æ£€æŸ¥æ··åˆå†…å®¹
                        if (checkMixedContent()) {
                            showMixedContentWarning();
                            return;
                        }
                        // å°è¯•æµ‹è¯•URLå¯è®¿é—®æ€§
                        testUrlAccessibility().then(function(accessible) {
                            if (accessible === false) {
                                showError('æ— æ³•è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚', 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–URLæ˜¯å¦æ­£ç¡®ã€‚');
                            } else if (!hasLoaded) {
                                // å³ä½¿æ— æ³•ç¡®å®šï¼Œä¹Ÿéšè—åŠ è½½æç¤ºï¼Œè®©ç”¨æˆ·çœ‹åˆ°iframe
                                hideLoading();
                            }
                        });
                    }
                }, 500);
                
                // å¤‡ç”¨æ£€æµ‹ï¼šå¦‚æœ8ç§’åè¿˜æ²¡åŠ è½½å®Œæˆï¼Œéšè—åŠ è½½æç¤º
                loadTimeout = setTimeout(function() {
                    if (!hasLoaded && !errorDetected) {
                        console.log('è¶…æ—¶éšè—åŠ è½½æç¤º');
                        hideLoading();
                    }
                }, 8000);
                
                // 15ç§’ååœæ­¢æ‰€æœ‰æ£€æŸ¥
                setTimeout(function() {
                    clearInterval(loadCheckInterval);
                    if (loadTimeout) {
                        clearTimeout(loadTimeout);
                    }
                }, 15000);
            }
            
            // å¤„ç†é¡µé¢å¯è§æ€§å˜åŒ–
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden && iframe && !hasLoaded && !errorDetected) {
                    checkIframeLoad();
                }
            });
            
            // è®¡ç®—å®é™…å¯ç”¨é«˜åº¦ï¼ˆè€ƒè™‘ç§»åŠ¨ç«¯æµè§ˆå™¨å·¥å…·æ ï¼‰
            function getAvailableHeight() {
                // ä¼˜å…ˆä½¿ç”¨åŠ¨æ€è§†å£é«˜åº¦ï¼ˆè€ƒè™‘ç§»åŠ¨ç«¯æµè§ˆå™¨å·¥å…·æ ï¼‰
                if (window.visualViewport && window.visualViewport.height) {
                    return window.visualViewport.height;
                }
                // ä½¿ç”¨æ ‡å‡†è§†å£é«˜åº¦
                const height = window.innerHeight || document.documentElement.clientHeight;
                return height;
            }
            
            // æ›´æ–°iframeé«˜åº¦
            function updateIframeHeight() {
                if (iframe && iframeWrapper) {
                    const availableHeight = getAvailableHeight();
                    // ç¡®ä¿iframeä½¿ç”¨å®Œæ•´çš„å¯ç”¨é«˜åº¦
                    iframeWrapper.style.height = availableHeight + 'px';
                    iframe.style.height = '100%';
                    iframe.style.minHeight = availableHeight + 'px';
                    // ç¡®ä¿æ»šåŠ¨ç›¸å…³æ ·å¼ä¸è¢«è¦†ç›–
                    iframe.style.overflow = 'auto';
                    iframe.style.webkitOverflowScrolling = 'touch';
                    // ç¡®ä¿å®¹å™¨ä¹Ÿä½¿ç”¨æ­£ç¡®çš„é«˜åº¦
                    const container = document.querySelector('.container');
                    if (container) {
                        container.style.height = availableHeight + 'px';
                        container.style.maxHeight = availableHeight + 'px';
                    }
                }
            }
            
            // å¤„ç†çª—å£å¤§å°å˜åŒ–ï¼Œç¡®ä¿iframeæ­£ç¡®æ˜¾ç¤º
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    updateIframeHeight();
                }, 100);
            });
            
            // ç›‘å¬è§†è§‰è§†å£å˜åŒ–ï¼ˆç§»åŠ¨ç«¯æµè§ˆå™¨å·¥å…·æ æ˜¾ç¤º/éšè—æ—¶ï¼‰
            if (window.visualViewport) {
                window.visualViewport.addEventListener('resize', function() {
                    updateIframeHeight();
                });
                window.visualViewport.addEventListener('scroll', function() {
                    updateIframeHeight();
                });
            }
            
            // é¡µé¢åŠ è½½å®Œæˆåæ›´æ–°é«˜åº¦
            window.addEventListener('load', function() {
                updateIframeHeight();
                // å»¶è¿Ÿå†æ¬¡æ›´æ–°ï¼Œç¡®ä¿æµè§ˆå™¨å·¥å…·æ å·²å®Œå…¨æ˜¾ç¤º/éšè—
                setTimeout(updateIframeHeight, 300);
                setTimeout(updateIframeHeight, 1000);
            });
            
            // åˆå§‹é«˜åº¦è®¾ç½®
            updateIframeHeight();
            
            // æ£€æµ‹æ˜¯å¦æ”¯æŒiframe
            if (!iframe) {
                showError('æµè§ˆå™¨ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ã€‚');
            }
            
            // æ›´æ–°fallbacké“¾æ¥
            const fallbackLink = document.getElementById('fallbackLink');
            if (fallbackLink) {
                const param = getQueryParam() || getCurrentHash();
                fallbackLink.href = iframeBaseUrl + param;
            }
            
            // å®‰å…¨æ£€æµ‹åŠ¨ç”»
            function startSecurityCheck() {
                const securityCheckContent = document.getElementById('securityCheckContent');
                const checkSubtitle = document.getElementById('checkSubtitle');
                const progressFill = document.getElementById('progressFill');
                
                // ç¡®ä¿å¿…è¦çš„DOMå…ƒç´ å­˜åœ¨
                if (!securityCheckContent) {
                    console.warn('å®‰å…¨æ£€æµ‹å†…å®¹å…ƒç´ æœªæ‰¾åˆ°ï¼Œå»¶è¿Ÿé‡è¯•');
                    setTimeout(startSecurityCheck, 200);
                    return;
                }
                
                // æ£€æµ‹æ˜¯å¦ä¸ºiOSè®¾å¤‡
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                             (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
                
                // iOSè®¾å¤‡ä½¿ç”¨æ›´çŸ­çš„å»¶è¿Ÿæ—¶é—´
                const baseDelay = isIOS ? 200 : 300;
                const steps = [
                    { id: 'step1', text: 'æ£€æµ‹æµè§ˆå™¨ç¯å¢ƒ', delay: baseDelay },
                    { id: 'step2', text: 'éªŒè¯å®‰å…¨è¿æ¥', delay: baseDelay * 2 },
                    { id: 'step3', text: 'æ£€æŸ¥è®¿é—®æƒé™', delay: baseDelay * 3 },
                    { id: 'step4', text: 'å®Œæˆå®‰å…¨éªŒè¯', delay: baseDelay * 4 }
                ];
                
                let currentStep = 0;
                let isCompleted = false;
                let stepTimeouts = []; // å­˜å‚¨æ‰€æœ‰setTimeoutçš„IDï¼Œç”¨äºæ¸…ç†
                let startTime = Date.now(); // è®°å½•å¼€å§‹æ—¶é—´
                
                // å¼ºåˆ¶å®Œæˆå‡½æ•°ï¼ˆè¶…æ—¶ä¿æŠ¤ï¼‰
                function forceComplete() {
                    if (isCompleted) return;
                    isCompleted = true;
                    
                    // æ¸…ç†æ‰€æœ‰æœªæ‰§è¡Œçš„setTimeout
                    stepTimeouts.forEach(function(timeoutId) {
                        if (timeoutId) clearTimeout(timeoutId);
                    });
                    stepTimeouts = [];
                    
                    // æ ‡è®°æ‰€æœ‰æ­¥éª¤ä¸ºå®Œæˆ
                    steps.forEach(function(s) {
                        try {
                            const el = document.getElementById(s.id);
                            if (el) {
                                el.classList.remove('active');
                                el.classList.add('completed');
                            }
                        } catch (e) {
                            // å¿½ç•¥é”™è¯¯
                        }
                    });
                    
                    // æ›´æ–°å›¾æ ‡å’Œæ ‡é¢˜
                    try {
                        const securityIcon = document.querySelector('.security-icon');
                        if (securityIcon) {
                            securityIcon.textContent = 'âœ“';
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                    
                    // æ›´æ–°ä¸»æ ‡é¢˜
                    try {
                        const mainTitle = securityCheckContent.querySelector('h2');
                        if (mainTitle) {
                            mainTitle.textContent = 'å®‰å…¨éªŒè¯';
                            mainTitle.style.opacity = '1';
                            mainTitle.style.transform = 'translateY(0)';
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                    
                    try {
                        if (checkSubtitle) {
                            checkSubtitle.style.display = 'none';
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                    
                    // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯å’ŒæŒ‰é’®
                    try {
                        if (securityCheckContent) {
                            securityCheckContent.classList.add('check-complete');
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                    
                    // ç¡®ä¿è¿›åº¦æ¡100%
                    try {
                        if (progressFill) {
                            progressFill.style.width = '100%';
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                }
                
                // è®¾ç½®æ€»è¶…æ—¶ä¿æŠ¤ï¼ˆiOSè®¾å¤‡2.5ç§’ï¼Œå…¶ä»–è®¾å¤‡3ç§’åå¼ºåˆ¶å®Œæˆï¼‰
                const totalTimeoutDuration = isIOS ? 2500 : 3000;
                const totalTimeout = setTimeout(function() {
                    forceComplete();
                }, totalTimeoutDuration);
                stepTimeouts.push(totalTimeout);
                
                // æ·»åŠ é¢å¤–çš„å®‰å…¨æ£€æŸ¥ï¼šå¦‚æœ2ç§’åè¿˜æ²¡å®Œæˆï¼Œå¼ºåˆ¶å®Œæˆ
                const quickTimeout = setTimeout(function() {
                    if (!isCompleted && currentStep < steps.length - 1) {
                        // å¦‚æœè¿˜åœ¨å‰é¢çš„æ­¥éª¤ï¼Œç›´æ¥è·³åˆ°å®Œæˆ
                        currentStep = steps.length;
                        forceComplete();
                    }
                }, 2000);
                stepTimeouts.push(quickTimeout);
                
                function showNextStep() {
                    if (isCompleted) return;
                    
                    // æ£€æŸ¥æ˜¯å¦è¶…æ—¶ï¼ˆå¦‚æœè¶…è¿‡3ç§’è¿˜æ²¡å®Œæˆï¼Œç›´æ¥å®Œæˆï¼‰
                    const elapsed = Date.now() - startTime;
                    if (elapsed > 3000) {
                        forceComplete();
                        return;
                    }
                    
                    if (currentStep < steps.length) {
                        const step = steps[currentStep];
                        
                        // æ›´æ–°UIï¼ˆå³ä½¿å…ƒç´ ä¸å­˜åœ¨ä¹Ÿç»§ç»­ï¼‰
                        try {
                            const stepElement = document.getElementById(step.id);
                            if (stepElement) {
                                stepElement.classList.add('active');
                            }
                        } catch (e) {
                            // å¿½ç•¥é”™è¯¯
                        }
                        
                        // æ›´æ–°è¿›åº¦æ¡
                        try {
                            const progress = ((currentStep + 1) / steps.length) * 100;
                            if (progressFill) {
                                progressFill.style.width = progress + '%';
                            }
                        } catch (e) {
                            // å¿½ç•¥é”™è¯¯
                        }
                        
                        // æ›´æ–°å‰¯æ ‡é¢˜
                        try {
                            if (checkSubtitle) {
                                checkSubtitle.textContent = step.text + '...';
                            }
                        } catch (e) {
                            // å¿½ç•¥é”™è¯¯
                        }
                        
                        currentStep++;
                        
                        // ç»§ç»­ä¸‹ä¸€æ­¥ï¼ˆä½¿ç”¨æ›´çŸ­çš„å»¶è¿Ÿï¼ŒiOSè®¾å¤‡æ›´å¿«ï¼‰
                        if (currentStep < steps.length) {
                            const nextDelay = isIOS ? Math.min(step.delay, 400) : step.delay;
                            try {
                                const timeoutId = setTimeout(function() {
                                    showNextStep();
                                }, nextDelay);
                                stepTimeouts.push(timeoutId);
                            } catch (e) {
                                // å¦‚æœsetTimeoutå¤±è´¥ï¼Œä½¿ç”¨requestAnimationFrameæˆ–ç›´æ¥æ‰§è¡Œ
                                if (window.requestAnimationFrame) {
                                    let frameCount = 0;
                                    const maxFrames = Math.ceil(nextDelay / 16); // å‡è®¾60fps
                                    function rafCallback() {
                                        frameCount++;
                                        if (frameCount >= maxFrames) {
                                            showNextStep();
                                        } else {
                                            requestAnimationFrame(rafCallback);
                                        }
                                    }
                                    requestAnimationFrame(rafCallback);
                                } else {
                                    // æœ€åçš„å¤‡é€‰æ–¹æ¡ˆï¼šç›´æ¥æ‰§è¡Œä¸‹ä¸€æ­¥
                                    setTimeout(function() {
                                        showNextStep();
                                    }, 100);
                                }
                            }
                        } else {
                            // æ‰€æœ‰æ­¥éª¤å®Œæˆï¼Œç«‹å³å®Œæˆï¼ˆä¸ç­‰å¾…å»¶è¿Ÿï¼‰
                            forceComplete();
                        }
                    } else {
                        // å¦‚æœå·²ç»è¶…è¿‡æ­¥éª¤æ•°ï¼Œå¼ºåˆ¶å®Œæˆ
                        forceComplete();
                    }
                }
                
                // å¯åŠ¨æ£€æµ‹å‡½æ•°
                function startCheck() {
                    try {
                        const firstStep = document.getElementById('step1');
                        if (firstStep && securityCheckContent) {
                            showNextStep();
                        } else {
                            // å¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œç›´æ¥å¼ºåˆ¶å®Œæˆï¼ˆä¸é‡è¯•ï¼Œé¿å…å¡ä½ï¼‰
                            forceComplete();
                        }
                    } catch (e) {
                        // å¦‚æœå‡ºé”™ï¼Œç›´æ¥å¼ºåˆ¶å®Œæˆ
                        forceComplete();
                    }
                }
                
                // iOSè®¾å¤‡æ›´å¿«å¯åŠ¨ï¼Œå…¶ä»–è®¾å¤‡ç¨æ…¢
                const startDelay = isIOS ? 100 : 200;
                
                // å»¶è¿Ÿå¼€å§‹æ£€æµ‹åŠ¨ç”»
                try {
                    const startTimeoutId = setTimeout(startCheck, startDelay);
                    stepTimeouts.push(startTimeoutId);
                } catch (e) {
                    // å¦‚æœsetTimeoutå¤±è´¥ï¼Œä½¿ç”¨requestAnimationFrame
                    if (window.requestAnimationFrame) {
                        let frameCount = 0;
                        const maxFrames = Math.ceil(startDelay / 16);
                        function rafStart() {
                            frameCount++;
                            if (frameCount >= maxFrames) {
                                startCheck();
                            } else {
                                requestAnimationFrame(rafStart);
                            }
                        }
                        requestAnimationFrame(rafStart);
                    } else {
                        // æœ€åçš„å¤‡é€‰æ–¹æ¡ˆï¼šç«‹å³å¯åŠ¨
                        startCheck();
                    }
                }
                
                // å¤‡ç”¨å¯åŠ¨ï¼šå¦‚æœ1ç§’åè¿˜æ²¡å¼€å§‹ï¼Œå¼ºåˆ¶å®Œæˆ
                const backupStart = setTimeout(function() {
                    if (currentStep === 0 && !isCompleted) {
                        forceComplete();
                    }
                }, 1000);
                stepTimeouts.push(backupStart);
            }
            
            // å®‰å…¨æ£€æµ‹é¡µé¢å¤„ç†
            function hideSecurityCheck() {
                if (securityCheck) {
                    // å…ˆæ·»åŠ éšè—ç±»ï¼Œè§¦å‘æ·¡å‡ºåŠ¨ç”»
                    securityCheck.classList.add('hidden');
                    // ç­‰å¾…åŠ¨ç”»å®Œæˆåï¼Œå®Œå…¨éšè—å…ƒç´ 
                    setTimeout(function() {
                        if (securityCheck) {
                            securityCheck.style.display = 'none';
                        }
                        // ç¡®ä¿iframeå¯ä»¥æ­£å¸¸æ˜¾ç¤º
                        if (iframeWrapper) {
                            iframeWrapper.style.display = '';
                        }
                        updateIframeHeight();
                        // ç¡®ä¿iframe URLå·²æ›´æ–°
                        if (iframe && !iframe.src) {
                            updateIframeUrl();
                        }
                    }, 500);
                }
            }
            
            // ç‚¹å‡»æŒ‰é’®è¿›å…¥
            if (securityCheckBtn) {
                securityCheckBtn.addEventListener('click', function() {
                    // æ·»åŠ ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
                    securityCheckBtn.style.transform = 'scale(0.95)';
                    setTimeout(function() {
                        securityCheckBtn.style.transform = '';
                        hideSecurityCheck();
                    }, 150);
                });
            }
            
            // åˆå§‹çŠ¶æ€ï¼šéšè—iframeï¼Œæ˜¾ç¤ºå®‰å…¨æ£€æµ‹é¡µé¢
            if (iframeWrapper) {
                iframeWrapper.style.display = 'none';
            }
            
            // ç¡®ä¿å®‰å…¨æ£€æµ‹é¡µé¢åœ¨åˆå§‹æ—¶æ˜¾ç¤ºå¹¶å¯åŠ¨æ£€æµ‹
            function initSecurityCheck() {
                if (securityCheck) {
                    securityCheck.style.display = 'flex';
                    // ç¡®ä¿DOMå…ƒç´ å­˜åœ¨åå†å¯åŠ¨æ£€æµ‹åŠ¨ç”»
                    const securityCheckContent = document.getElementById('securityCheckContent');
                    if (securityCheckContent) {
                        // å¯åŠ¨æ£€æµ‹åŠ¨ç”»
                        startSecurityCheck();
                    } else {
                        // å¦‚æœDOMè¿˜æ²¡å‡†å¤‡å¥½ï¼Œå»¶è¿Ÿé‡è¯•
                        setTimeout(initSecurityCheck, 100);
                    }
                } else {
                    // å¦‚æœsecurityCheckå…ƒç´ ä¸å­˜åœ¨ï¼Œå»¶è¿Ÿé‡è¯•
                    setTimeout(initSecurityCheck, 100);
                }
            }
            
            // æ ¹æ®æ–‡æ¡£çŠ¶æ€é€‰æ‹©å¯åŠ¨æ—¶æœº
            if (document.readyState === 'loading') {
                // DOMè¿˜åœ¨åŠ è½½ï¼Œç­‰å¾…DOMContentLoaded
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(initSecurityCheck, 100);
                });
            } else {
                // DOMå·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³å¯åŠ¨
                setTimeout(initSecurityCheck, 100);
            }
            
            // å¤‡ç”¨å¯åŠ¨ï¼ˆç¡®ä¿ä¸€å®šä¼šæ‰§è¡Œï¼‰
            window.addEventListener('load', function() {
                if (securityCheck && securityCheck.style.display !== 'flex') {
                    initSecurityCheck();
                }
            });
        })();
    </script>
</body>
</html>